import{a as q,i as f,A as H}from"./assets/vendor-BOf7_0lP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const M=document.querySelector(".loader-more"),x=document.querySelector(".loader-more-container"),C=document.querySelector(".furniture-list"),$=document.querySelector(".load-more-btn");let d=1,l=null;const S=8;window.allFurnitures=window.allFurnitures||[];async function j(){try{const t=(await q("https://furniture-store.b.goit.study/api/categories")).data;t.unshift({_id:"0",name:"Всі товари"}),document.querySelectorAll(".category-card").forEach((n,r)=>{const s=t[r];if(!s)return;n.dataset.id=s._id;const i=n.querySelector(".category-title");i&&(i.textContent=s.name)})}catch{f.show({message:"Sorry, something went wrong. Please try again!",position:"topRight",messageColor:"#fff",titleColor:"#fff",color:"#ef4040",iconUrl:"../images/our-furniture/bi_x-octagon-2.svg",maxWidth:432})}}async function y(e=1,t){try{U(),k();let o=`https://furniture-store.b.goit.study/api/furnitures?limit=${S}&page=${e}`;t&&t!=="0"&&(o+=`&category=${t}`);const r=(await q(o)).data;z(r),l===null&&(l=Math.ceil(r.totalItems/S)),e>=l?k():W()}catch{f.show({message:"Sorry, something went wrong. Please try again!",position:"topRight",messageColor:"#fff",titleColor:"#fff",color:"#ef4040",iconUrl:"../images/our-furniture/bi_x-octagon-2.svg",maxWidth:432})}finally{V()}}function z(e){const t=e.furnitures;window.allFurnitures=[...new Map([...window.allFurnitures,...t].map(n=>[n._id,n])).values()];const o=t.map(n=>{const{_id:r,name:s,description:i,price:a,images:D}=n;return`
    <li class="furniture-card" id="${r}"> 
  <img src="${D[0]}" alt="${i}" class="furniture-image" />
      <p class="furniture-name">${s}</p>
      <div class="color-wrap">
        <span class="grey-color"></span>
        <span class="beige-color"></span>
        <span class="black-color"></span>
      </div>
      <p class="furniture-price">${a} грн</p>
  <button class="details-btn" type="button">Детальніше</button>
</li>`}).join("");C.insertAdjacentHTML("beforeend",o)}async function R(e){const t=e.target.closest(".category-card");if(!t)return;document.querySelectorAll(".category-card.active").forEach(n=>n.classList.remove("active")),t.classList.add("active");const o=t.dataset.id;G(),d=1,o==="0"?(l=null,y(d)):(l=null,y(d,o))}function N(){d+=1,y(d)}function U(){M.classList.remove("hidden"),x.style.display="flex"}function V(){M.classList.add("hidden"),x.style.display="none"}function W(){$.classList.remove("hidden")}function k(){$.classList.add("hidden")}function G(){C.innerHTML="",window.allFurnitures=[]}const K=document.querySelector(".categories-list"),J=document.querySelector(".load-more-btn");J.addEventListener("click",N);K.addEventListener("click",R);j();y(d);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".hero__button"),t=document.querySelector("#reviews");e&&t&&e.addEventListener("click",()=>{t.scrollIntoView({behavior:"smooth",block:"start"})})});const w=document.querySelector("[data-menu]"),_=document.querySelector("[data-menu-open]"),Q=document.querySelector("[data-menu-close]"),X=document.querySelectorAll(".mobile-nav-list a, .mobile-btn");function Y(){w.classList.add("is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",A),document.addEventListener("click",O)}function h(){w.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",A),document.removeEventListener("click",O)}function A(e){e.key==="Escape"&&h()}function O(e){!w.contains(e.target)&&!_.contains(e.target)&&h()}_.addEventListener("click",Y);Q.addEventListener("click",h);X.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.getAttribute("href"),n=document.querySelector(o);n&&(h(),n.scrollIntoView({behavior:"smooth"}))})});const g=document.querySelector(".modal"),F=document.querySelector(".modal_close"),E=document.querySelector(".modal_main-image img"),P=document.querySelector(".modal_title"),Z=document.querySelector(".modal_category"),ee=document.querySelector(".modal_price"),te=document.querySelector(".modal_description"),b=document.querySelector(".modal_rate"),L=document.querySelector(".color-checkboxes"),oe=document.querySelector(".modal_sizes"),c=document.querySelector(".modal_order-btn"),T=document.querySelector(".modal_thumbnails"),ne=document.querySelector(".furniture-list");let p=0,u=[];function B(e){e.key==="Escape"&&v()}function I(){if(!u.length)return;E.src=u[p],E.alt=P.textContent||"Фото товару";const e=u.map((t,o)=>({src:t,i:o})).filter(({i:t})=>t!==p).map(({src:t,i:o})=>`
      <img class="thumbnail-img" src="${t}" alt="thumb ${o}" data-index="${o}">
    `).join("");T.innerHTML=e}T?.addEventListener("click",e=>{const t=e.target.closest(".thumbnail-img");t&&(p=Number(t.dataset.index),I())});ne?.addEventListener("click",e=>{const t=e.target.closest(".details-btn");if(!t)return;const o=t.closest(".furniture-card");if(!o)return;const n=o.dataset.id||o.id;if(!n||!window.allFurnitures)return;const r=window.allFurnitures.find(s=>s._id===n);r&&re(r)});function re(e){if(P.textContent=e.name||"Без назви",Z.textContent=e.type||"Тип невідомий",ee.textContent=`${e.price} грн`||"Ціна невідома",te.textContent=e.description||"Опис відсутній",c.dataset.model=e.name||"",c.setAttribute("data-modal-open",""),c.setAttribute("data-id",e._id),c.setAttribute("data-marker","product-modal"),b&&typeof e.rate=="number"){const t=Math.round(e.rate*10)/10,o=Math.min(5,t)/5*100;b.innerHTML=`
      <div class="star-rating" style="--star-fill: ${o}%"></div>
      <span class="rating-text">${t.toFixed(1)}</span>
    `}else b.innerHTML="";L&&Array.isArray(e.color)?L.innerHTML=e.color.map((t,o)=>{const n=`color-${o}`;return`
          <input type="radio" id="${n}" name="color" data-color="${t}" ${o===0?"checked":""} />
          <label for="${n}" style="background-color: ${t}"></label>
        `}).join(""):L.innerHTML="",oe.textContent=`Розміри: ${e.sizes||"невідомі"}`,u=Array.isArray(e.images)?e.images.slice():[],p=0,I(),c.dataset.id=e._id||"",g.classList.remove("visually-hidden"),F.focus(),document.body.style.overflow="hidden",document.addEventListener("keydown",B)}function v(){g.classList.add("visually-hidden"),document.body.style.overflow="",document.removeEventListener("keydown",B)}F?.addEventListener("click",v);g?.addEventListener("click",e=>{e.target===g&&v()});c.addEventListener("click",()=>{const e=document.querySelector('.color-checkboxes input[type="radio"]:checked'),t=e?e.dataset.color:null;t&&c.setAttribute("data-color",t),c.dataset.model&&c.setAttribute("data-model",c.dataset.model),v();const o=new CustomEvent("open-order-modal",{detail:{model:c.dataset.model||"",color:t}});document.dispatchEvent(o)});const se="data:image/svg+xml,%3csvg%20aria-hidden='true'%20style='position:%20absolute;%20width:%200;%20height:%200;%20overflow:%20hidden;'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3csymbol%20id='icon-x-icon'%20viewBox='0%200%2032%2032'%3e%3cpath%20d='M21.589%208.459l-5.657%205.656-5.656-5.656-1.885%201.885%205.656%205.656-5.656%205.656%201.885%201.885%205.656-5.656%205.657%205.656%201.885-1.885-5.656-5.656%205.656-5.656-1.885-1.885z'%3e%3c/path%3e%3c/symbol%3e%3c/defs%3e%3c/svg%3e";async function ce(){try{if(!document.getElementById("svg-sprite")){const i=await(await fetch(se)).text(),a=document.createElement("div");a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.id="svg-sprite",a.innerHTML=i,document.body.prepend(a)}const t=await(await fetch("./partials/order-modal.html")).text();document.body.insertAdjacentHTML("beforeend",t);const o=document.querySelector(".backdrop"),n=document.querySelector(".modal-button-close"),r=document.querySelector(".modal-form");o&&(o.addEventListener("click",s=>{s.target===o&&m()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&o.classList.contains("is-open")&&m()})),n&&n.addEventListener("click",m),r&&r.addEventListener("submit",ae)}catch(e){console.error("Помилка завантаження модалки:",e)}}function m(){const e=document.querySelector(".backdrop");e&&(e.classList.remove("is-open"),document.body.style.overflow="",ie())}function ie(){const e=document.querySelector(".modal-form");e&&e.reset()}async function ae(e){e.preventDefault();const t=e.target,o=new FormData(t);o.get("user-name"),o.get("user-phone"),o.get("user-comment");try{f.success({title:"Успіх",message:"Форма успішно відправлена",position:"topRight"}),m()}catch{f.error({title:"Помилка",message:"Щось пішло не так ",position:"topRight"})}}function de(e=!0,t=null,o=null){const n=document.querySelector(".backdrop");n&&(n.classList.toggle("is-open",e),document.body.style.overflow=e?"hidden":"")}function le(){document.addEventListener("DOMContentLoaded",()=>{new H(".accordion",{duration:300,showMultiple:!1}).open(0)})}document.addEventListener("DOMContentLoaded",()=>{ce(),document.addEventListener("click",e=>{if(e.target.closest("[data-modal-open]")){const t=e.target.closest("[data-modal-open]").dataset.id,o=e.target.closest("[data-modal-open]").dataset.marker;de(!0,t,o)}})});le();
//# sourceMappingURL=index.js.map
