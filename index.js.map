{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/our-furniture.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loaderMore = document.querySelector(\".loader-more\")\nconst loaderMoreContainer = document.querySelector(\".loader-more-container\");\nconst furnituresListContainer = document.querySelector(\".furniture-list\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nexport let currentPage = 1;\nlet totalPages = null;\nconst limit = 8;\n\nexport async function fetchCategories() {\n    try {\n        const response = await axios('https://furniture-store.b.goit.study/api/categories');\n        const categories = response.data;\n\n      categories.unshift({ _id: \"0\", name: \"Всі товари\" })\n      const categoryCards = document.querySelectorAll('.category-card');\n\n    categoryCards.forEach((card, index) => {\n      const category = categories[index];\n      if (!category) return;\n\n      card.dataset.id = category._id;\n\n      const title = card.querySelector('.category-title');\n      if (title) {\n        title.textContent = category.name;\n      }\n    });} catch (error) {\n        iziToast.show({\n      message: 'Sorry, something went wrong. Please try again!',\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n      color: '#ef4040',\n      iconUrl: '../images/our-furniture/bi_x-octagon-2.svg',\n      maxWidth: 432\n    });\n    }\n}\n\nexport async function fetchProducts(page = 1, id) {\n  try {\n    showLoaderMore();\n    hideLoadMoreButton();\n\n    let url = `https://furniture-store.b.goit.study/api/furnitures?limit=${limit}&page=${page}`;\n    \n    if (id && id !== \"0\") {\n      url += `&category=${id}`;\n    }\n\n    const response = await axios(url);\n    const productsObject = response.data;\n    \n    renderProducts(productsObject);\n\n    if (totalPages === null) {\n      totalPages = Math.ceil(productsObject.totalItems / limit);\n    }\n\n    if (page >= totalPages) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton(); \n    }\n  } catch (error) {\n    iziToast.show({\n      message: 'Sorry, something went wrong. Please try again!',\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n      color: '#ef4040',\n      iconUrl: '../images/our-furniture/bi_x-octagon-2.svg',\n      maxWidth: 432\n    });\n  } finally {\n    hideLoaderMore();\n  }\n}\n\nexport function renderProducts(obj) {\n    const furnitures = obj.furnitures;\n    window.allFurnitures = furnitures;\n  const markup = furnitures.map(product => {\n    const { _id, name, description, price, images } = product;\n    return `\n    <li class=\"furniture-card\" id=\"${_id}\"> \n  <img src=\"${images[0]}\" alt=\"${description}\" class=\"furniture-image\" />\n      <p class=\"furniture-name\">${name}</p>\n      <div class=\"color-wrap\">\n        <span class=\"grey-color\"></span>\n        <span class=\"beige-color\"></span>\n        <span class=\"black-color\"></span>\n      </div>\n      <p class=\"furniture-price\">${price} грн</p>\n  <button class=\"details-btn\" type=\"button\">Детальніше</button>\n</li>`\n  }).join(\"\");\n\n  furnituresListContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nexport async function handlerClickOnCategory(event){\n    const currentCategory = event.target.closest(\".category-card\")\n    if (!currentCategory) {\n        return\n    }\n\n    document.querySelectorAll(\".category-card.active\").forEach(card =>\n    card.classList.remove(\"active\")\n  );\n\n    currentCategory.classList.add(\"active\");\n    \n    const currentCategoryID = currentCategory.dataset.id;\n    \n    clearProducts();\n    currentPage = 1; \n\n  if (currentCategoryID === \"0\") { \n    totalPages = null; \n    fetchProducts(currentPage);\n  } else {\n    totalPages = null; \n    fetchProducts(currentPage, currentCategoryID);\n  }\n}\n\n\n\n\n export function handleLoadMore() {\n  currentPage += 1;\n  fetchProducts(currentPage);\n }\n\n export function showLoaderMore() {\n  loaderMore.classList.remove(\"hidden\");\n  loaderMoreContainer.style.display = 'flex';\n\n}\n\n export function hideLoaderMore() {\n  loaderMore.classList.add(\"hidden\");\n  loaderMoreContainer.style.display = 'none';\n }\n\n \nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"hidden\");\n  \n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"hidden\");\n}\n\nfunction clearProducts() {\n    furnituresListContainer.innerHTML = \"\";\n}","import axios from 'axios';\nimport {fetchCategories, fetchProducts, showLoaderMore, hideLoaderMore, handleLoadMore, renderProducts, currentPage, handlerClickOnCategory } from '../js/api.js';\n\nconst categoriesList = document.querySelector(\".categories-list\");\nconst moreBtn = document.querySelector(\".load-more-btn\");\nmoreBtn.addEventListener(\"click\", handleLoadMore);\ncategoriesList.addEventListener(\"click\", handlerClickOnCategory);\n\nfetchCategories();\nfetchProducts(currentPage);"],"names":["loaderMore","loaderMoreContainer","furnituresListContainer","loadMoreBtn","currentPage","totalPages","limit","fetchCategories","categories","axios","card","index","category","title","iziToast","fetchProducts","page","id","showLoaderMore","hideLoadMoreButton","url","productsObject","renderProducts","showLoadMoreButton","hideLoaderMore","obj","furnitures","markup","product","_id","name","description","price","images","handlerClickOnCategory","event","currentCategory","currentCategoryID","clearProducts","handleLoadMore","categoriesList","moreBtn"],"mappings":"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"}